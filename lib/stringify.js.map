{"version":3,"sources":["../src/stringify.js"],"names":["stringify","stringifyFromEntries","stringifyFromProperties","input","options","Array","entries","parseOptions","output","entry","sep","eol","original","key","element","properties","namespace","escapeKey","escapeElement","replace","match"],"mappings":"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","file":"stringify.js","sourcesContent":["/**\n * Stringify properties object or entries to .properties file content.\n * @param {Array | Object} input Properties object or entries.\n * @param {Object} [options] Stringify options.\n * @returns {string} .properties file content.\n */\nexport function stringify(input, options) {\n  if (input instanceof Array) {\n    return stringifyFromEntries(input, options);\n  }\n\n  return stringifyFromProperties(input, options);\n}\n\n/**\n * Stringify entries to .properties file content.\n * @param {Array} entries Property entries.\n * @param {Object} [options] Stringify options, used when specified fields are\n *     not available in each entry.\n * @returns {string} .properties file content.\n */\nexport function stringifyFromEntries(entries, options) {\n  options = parseOptions(options);\n\n  let output = '';\n  for (let entry of entries) {\n    let sep = entry.sep || options.sep;\n    let eol = 'eol' in entry\n      ? entry.eol || ''   // Use empty string in case eol is null.\n      : options.eol;\n\n    // Prefer original if available\n    if (entry.original != null) {\n      output += entry.original;\n    } else {\n      // Output a blank line for blank and comment entry\n      output += entry.key == null || entry.element == null\n        ? '' : entry.key + sep + entry.element;\n    }\n\n    output += eol;\n  }\n\n  return output;\n}\n\n/**\n * Stringify properties object to .properties file content.\n * @param {Object} properties Properties object.\n * @param {Object} [options] Stringify options.\n * @returns {string} .properties file content.\n */\nexport function stringifyFromProperties(properties, options) {\n  options = parseOptions(options);\n\n  let output = '';\n  for (let key in properties) {\n    let element = properties[key];\n    if (typeof element === 'string') {\n      if (options.namespace) {\n        output += escapeKey(options.namespace);\n\n        // Add a dot after namespace if key is not empty\n        if (key) {\n          output += '.';\n        }\n      }\n      output += escapeKey(key) +\n          options.sep +\n          escapeElement(element) +\n          options.eol;\n    } else {\n      // Namespaced properties\n      let namespace = options.namespace\n        ? options.namespace + '.' + key\n        : key;\n      output += stringifyFromProperties(element,\n          Object.assign({}, options, { namespace: namespace }));\n    }\n  }\n\n  return output;\n}\n\n/**\n * Normalize user provided options.\n * @param {*} options Original options.\n * @returns {Object} Normalized options.\n */\nfunction parseOptions(options) {\n  options = options || {};\n  options.sep = options.sep || ' = ';\n  options.eol = options.eol || '\\r\\n';\n  return options;\n}\n\n/**\n * Escape special characters in property key.\n * @param {string} key Key to be mutated.\n * @returns {string} Escaped key.\n */\nfunction escapeKey(key) {\n  return key.replace(/[\\s\\S]/g, (match) => {\n    switch (match) {\n      case '=': return '\\\\=';\n      case ':': return '\\\\:';\n      case ' ': return '\\\\ ';\n      default: return escapeElement(match);\n    }\n  });\n}\n\n/**\n * Escape special characters in property element.\n * @param {string} element Element to be mutated.\n * @returns {string} Escaped element.\n */\nfunction escapeElement(element) {\n  return element.replace(/[\\s\\S]/g, (match) => {\n    switch (match) {\n      case '\\\\': return '\\\\\\\\';\n      case '\\f': return '\\\\f';\n      case '\\n': return '\\\\n';\n      case '\\r': return '\\\\r';\n      case '\\t': return '\\\\t';\n      default: return match;\n    }\n  });\n}\n"]}